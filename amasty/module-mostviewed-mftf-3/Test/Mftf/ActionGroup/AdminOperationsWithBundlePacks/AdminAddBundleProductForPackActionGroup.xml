<?xml version="1.0" encoding="UTF-8" ?>
<!--
/**
* @author Amasty Team
* @copyright Copyright (c) 2022 Amasty (https://www.amasty.com)
* @package Automatic Related Products MFTF 3 for Magento 2 (System)
*/-->
<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="AdminAddBundleProductForPackActionGroup">
        <arguments>
            <argument name="bundleProduct"/>
        </arguments>
        <conditionalClick selector="{{AdminNewBundlePacksSection.displayBundlePackProductsTab}}"
                          dependentSelector="{{AdminNewBundlePacksSection.addBundlePackProducts}}" visible="false"
                          stepKey="pressToExpandBundlePackChildProductsTab"/>
        <waitForElementVisible selector="{{AdminNewBundlePacksSection.addBundlePackProducts}}"
                               stepKey="waitForElementAddToBundlePackVisible"/>
        <click selector="{{AdminNewBundlePacksSection.addBundlePackProducts}}" stepKey="pressToAddChildProducts"/>
        <waitForAjaxLoad stepKey="waitForAjaxLoadAfterAddChild"/>
        <click selector="{{AdminNewBundlePacksSection.filterButton}}" stepKey="pressToExpandFilterMenu"/>
        <waitForAjaxLoad stepKey="waitForAjaxLoadAfterFilter"/>
        <waitForElementVisible selector="{{AdminNewBundlePacksSection.productNameField}}"
                               stepKey="waitForFilterFieldVisible"/>
        <fillField selector="{{AdminNewBundlePacksSection.productNameField}}" userInput="{{bundleProduct}}"
                   stepKey="fillProductNameFilterField"/>
        <click selector="{{AdminNewBundlePacksSection.applyFilterButtonForBundleProduct}}"
               stepKey="pressToApplyFilter"/>
        <waitForElementVisible selector="{{AdminNewBundlePacksSection.bundlePackProductCheckBox(bundleProduct)}}"
                               stepKey="waitForElementAddToBundlePackVisibleChildProduct"/>
        <waitForAjaxLoad stepKey="waitForAjaxLoaded"/>
        <click selector="{{AdminNewBundlePacksSection.bundlePackProductCheckBox(bundleProduct)}}"
               stepKey="pressToSelectProduct"/>
        <click selector="{{AdminNewBundlePacksSection.addSelectedBundleProductToBundlePack}}"
               stepKey="pressToAddSelectedChildProducts"/>
        <waitForAjaxLoad stepKey="waitForBundleAjaxLoadAfterAddChild"/>
    </actionGroup>
</actionGroups>
